<!DOCTYPE html>
<html>
<head>
  <title>Admin Login</title>
  <style>
    body {
      font-family: Arial;
      background:#f4f6f9;
      display:flex;
      justify-content:center;
      align-items:center;
      height:100vh;
    }
    .box {
      background:white;
      padding:30px;
      border-radius:12px;
      box-shadow:0 4px 15px rgba(0,0,0,0.1);
      text-align:center;
    }
    input {
      padding:10px;
      margin:10px 0;
      width:200px;
    }
    button {
      padding:10px 20px;
      border:none;
      background:#2ecc71;
      color:white;
      border-radius:8px;
      cursor:pointer;
    }
  </style>
</head>
<body>

<div class="box" id="loginBox">
  <h2>üîê Admin Login</h2>
  <input type="password" id="password" placeholder="Enter password">
  <br>
  <button onclick="login()">Login</button>
</div>

<div id="adminPanel" style="display:none; padding:20px;">
  <h1>üìä Dashboard</h1>
  <div id="summary"></div>
  <div id="orders"></div>
</div>

<script>
const BASE_URL = "https://YOUR-BACKEND.onrender.com";
const ADMIN_PASSWORD = "1234"; // üî¥ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ

function login(){
  const pass = document.getElementById("password").value;
  if(pass === ADMIN_PASSWORD){
    document.getElementById("loginBox").style.display="none";
    document.getElementById("adminPanel").style.display="block";
    loadOrders();
  } else {
    alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡∏¥‡∏î");
  }
}

async function loadOrders(){
  const res = await fetch(BASE_URL + "/orders");
  const orders = await res.json();

  let total = 0;
  let pending = 0;
  let today = 0;

  const todayDate = new Date().toDateString();

  orders.forEach(o=>{
    if(o.status==="approved"){
      total += o.originalAmount;
    }
    if(o.status==="pending"){
      pending++;
    }
    if(new Date(o.createdAt).toDateString()===todayDate){
      today += o.originalAmount;
    }
  });

  document.getElementById("summary").innerHTML = `
    <p>üí∞ ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${total} ‡∏ö‡∏≤‡∏ó</p>
    <p>‚è≥ ‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥: ${pending} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>
    <p>üìÖ ‡∏¢‡∏≠‡∏î‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ: ${today} ‡∏ö‡∏≤‡∏ó</p>
    <hr>
  `;

  const container = document.getElementById("orders");
  container.innerHTML="";

  orders.forEach(order=>{
    container.innerHTML += `
      <div style="background:white;padding:15px;margin:10px 0;border-radius:10px;">
        <p>Email: ${order.email}</p>
        <p>‡∏¢‡∏≠‡∏î: ${order.originalAmount}</p>
        <p>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ${order.status}</p>
        ${order.slip ? `<button onclick="window.open('${BASE_URL}/uploads/${order.slip}')">‡∏î‡∏π‡∏™‡∏•‡∏¥‡∏õ</button>` : ""}
        ${order.status==="pending" ? `<button onclick="approve('${order._id}')">‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</button>` : ""}
      </div>
    `;
  });
}

async function approve(id){
  await fetch(BASE_URL + "/approve/" + id, {method:"POST"});
  loadOrders();
}
</script>

</body>
</html>